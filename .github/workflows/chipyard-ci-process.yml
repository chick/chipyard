name: chipyard-ci-process

on: [push]

env:
  tools-cache-version: v6

jobs:
  install-verilator:
    name: commit-on-master-check
    runs-on: ubuntu-latest
    container:
      image: ucbbar/chipyard-ci-image:ab57b7d
      options: --user root --entrypoint /bin/bash
    env:
      JVM_OPTS: -Xmx3200m # Customize the JVM maximum heap limit
    steps:
      - name: fix permissions
        run: sudo chown -R riscvuser .
      - name: Checkout
        uses: actions/checkout@v2
      - name: show remote
        run: echo remote server is ${{ secrets.MILLENNIUMSERVER }}
      - name: testing connection
        uses: garygrossgarten/github-action-ssh@release
        with:
          command: hostname && ls -a
          host: ${{ secrets.BERKELEYSERVER }}
          username: circleci
          privateKey: ${{ secrets.SERVERKEY }}
